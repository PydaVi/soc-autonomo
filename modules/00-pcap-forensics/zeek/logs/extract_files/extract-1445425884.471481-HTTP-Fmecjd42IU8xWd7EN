function changetext(idstr, text)
{
	var elempara = document.getElementById(idstr);
	var oldtextnode = elempara.firstChild;
	var newtextnode = document.createTextNode(text);
	elempara.replaceChild(newtextnode, oldtextnode);
}

function checkSubmit(form)
{
	if(form.log_enable.value == "ENABLED")
	{
		if(isNaN(form.logbuf_size.value) || (form.logbuf_size.value == ""))
		{
			alert("Please provide an integer value");
			form.logbuf_size.select();
			return false;
		}
			
		if (document.configure.log_stoloc.value == "MEMORY")
		{
			if (isNaN(document.configure.logbuf_size.value) || (document.configure.logbuf_size.value == ""))
			{
				alert("Please provide an integer value between 0 and " + document.configure.lb_size_max_memory.value);
				document.configure.logbuf_size.select();
				return false;
			}
			if(parseInt(document.configure.logbuf_size.value) > parseInt(document.configure.lb_size_max_memory.value) || parseInt(document.configure.logbuf_size.value) < 0)
			{
				alert("Please provide an integer value between 0 and " + document.configure.lb_size_max_memory.value);
				document.configure.logbuf_size.select();
				return false;
			}

		}
		else if (document.configure.log_stoloc.value == "CFCARD")
		{
			if (isNaN(document.configure.logbuf_size.value) || (document.configure.logbuf_size.value == ""))
			{
				alert("Please provide an integer value between 0 and " + document.configure.lb_size_max_cf.value);
				document.configure.logbuf_size.select();
				return false;
			}
			if(parseInt(document.configure.logbuf_size.value) > parseInt(document.configure.lb_size_max_cf.value) || parseInt(document.configure.logbuf_size.value) < 0)
			{
				alert("Please provide an integer value between 0 and " + document.configure.lb_size_max_cf.value);
				document.configure.logbuf_size.select();
				return false;
			}

		}
		else if (document.configure.log_stoloc.value == "NFS")
		{
			if (isNaN(document.configure.logbuf_size.value) || (document.configure.logbuf_size.value == ""))
			{
				alert("Please provide an integer value between 0 and " + document.configure.lb_size_max_nfs.value);
				document.configure.logbuf_size.select();
				return false;
			}
			if(parseInt(document.configure.logbuf_size.value) > parseInt(document.configure.lb_size_max_nfs.value) || parseInt(document.configure.logbuf_size.value) < 0)
			{
				alert("Please provide an integer value between 0 and " + document.configure.lb_size_max_nfs.value);
				document.configure.logbuf_size.select();
				return false;
			}
	
		}
	
		if(form.emaillog.value == "ENABLED")
		{
			if(!isEmail(form.recvmailaddr)) return false;
						
			if(isNaN(form.emaillog_num.value) || (form.emaillog_num.value == ""))
			{
				alert("Please provide an integer value between 1 and 100");
				form.emaillog_num.select();
				return false;
			}
			if(parseInt(form.emaillog_num.value) > 100 || parseInt(form.emaillog_num.value) < 1)
			{
				alert("Please provide an integer value between 1 and 100");
				form.emaillog_num.select();
				return false;
			}
		}
	}
	
/*	for(i=0; i<form.elements.length; i++)
	{
		form.elements[i].disabled=false;
	}*/
	return true;
}

function check_log_size()
{

	if (document.configure.log_stoloc.value == "MEMORY"){
		document.configure.log_backup_onmount.disabled=true;
		changetext("lb_size_max_str", document.configure.lb_size_max_inner_str_memory.value); 
		//document.configure.logbuf_size.disabled = false;
	}else if (document.configure.log_stoloc.value == "CFCARD"){
		document.configure.log_backup_onmount.disabled=false;
		changetext("lb_size_max_str", document.configure.lb_size_max_inner_str_cf.value); 
		//document.configure.logbuf_size.disabled = false;
	}else if (document.configure.log_stoloc.value == "NFS"){
		document.configure.log_backup_onmount.disabled=false;
		changetext("lb_size_max_str", document.configure.lb_size_max_inner_str_nfs.value); 
		//document.configure.logbuf_size.disabled = false;
	}
	//else if (document.configure.log_stoloc.value == "SYSLOG")
	//{
	//	document.configure.logbuf_size.disabled = true;
	//}
	else{
		document.configure.log_backup_onmount.disabled=true;
		chnagetext("lb_size_max_str", document.configure.lb_size_max_inner_str_memory.value); 
		//document.configure.logbuf_size.disabled = false;
	}
}


function isEmail(element)
{
	emailAddress=element.value;
	if(element.value == "") 
	{
		alert("Please provide a valid e-mail address");
		element.focus();
		return false;
	}
	ret0=-1;
	rTok = / /g;  ret0 = element.value.search(rTok);
	if(ret0>=0)
	{
		alert("You should not use blank characters in email address");
		element.select();
		return false;
	}
	if(element.value.indexOf ('@',0) == -1 || element.value.indexOf ('.',0) == -1)
	{
		alert("The email field requires \"@\" and a \".\"be used.\nPlease provide a valid e-mail address");
		element.select();
		return false;
	}
	return true
}

function checkvaluelog()
{
	if(document.configure.log_enable.value == "DISABLED"){
		document.configure.logbuf_size.disabled=true;
		document.configure.log_stoloc.disabled=true;
		document.configure.log_syslog_enb.disabled=true;
		document.configure.log_backup_onmount.disabled=true;
		document.configure.emaillog.disabled=true;
		document.configure.emaillog_num.disabled=true;
		document.configure.recvmailaddr.disabled=true;
	}else{
		//if (document.configure.log_stoloc.value == "SYSLOG")
		//	document.configure.logbuf_size.disabled = true;
		//else
			document.configure.logbuf_size.disabled=false;
		document.configure.log_stoloc.disabled=false;
		document.configure.log_syslog_enb.disabled=false;
		check_log_size();
		document.configure.emaillog.disabled=false;
		if(document.configure.emaillog.value == "DISABLED"){
			document.configure.emaillog_num.disabled=true;
			document.configure.recvmailaddr.disabled=true;
		}else{
			document.configure.emaillog_num.disabled=false;
			document.configure.recvmailaddr.disabled=false;
		}
	}
}

function checkvalueemail()
{
	if(document.configure.emaillog.value == "DISABLED"){
		document.configure.emaillog_num.disabled=true;
		document.configure.recvmailaddr.disabled=true;
	}else{
		document.configure.emaillog_num.disabled=false;
		document.configure.recvmailaddr.disabled=false;
	}
}
